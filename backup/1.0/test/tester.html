<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Document</title>
    <style>
      img {
        max-width: 50%;
      }
    </style>
    <!-- <link rel="stylesheet" href="../css/viewer.css"> -->
  </head>
  <body>
    <img src="lisha-riabinina-DO1u-x0dFW8-unsplash.jpg" alt="" />
    <img src="paul-steiner-cPGqbk2WPvE-unsplash.jpg" alt="" />
    <img src="raphael-wild-rPFOS79S3QM-unsplash.jpg" alt="" />
  </body>
  <script src="shadow-viewer.js"></script>
  <script>
    ;(function () {
      'use strict'

      var options = {}
      options.closeButton = true

      if (document.documentElement.classList.contains('has-image-viewer')) {
        document.documentElement.classList.remove('has-image-viewer')
        var viewer = document.querySelector('body > div.__crx__image-viewer')
        viewer.addEventListener('transitionend', () => viewer.remove())
        viewer.style.transition = 'opacity 0.1s'
        viewer.style.opacity = '0'
        return
      }

      var imageUrls = []
      for (const img of document.querySelectorAll('img[src]')) {
        imageUrls.push(img.src)
      }

      for (const node of document.querySelectorAll('*')) {
        const style = window.getComputedStyle(node)
        const bg = style.backgroundImage
        if (!bg) break
        if (bg.indexOf('url') === 0 && bg.indexOf('.svg")') === -1) {
          imageUrls.push(bg.substring(4, bg.length - 1).replace(/['"]/g, ''))
        }
      }

      var uniqueImageUrls = []
      for (const img of imageUrls) {
        if (!uniqueImageUrls.includes(img)) {
          uniqueImageUrls.push(img)
        }
      }

      imageViewer(uniqueImageUrls, options)
    })()
  </script>
</html>
